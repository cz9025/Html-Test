<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<title>JSONP实现跨域2</title>
	</head>

	<body>
		<div id="mydiv">
			<button id="btn">点击</button>
			<span id="txt">
				
			</span>
		</div>
	</body>
	<script type="text/javascript">
//		在页面中，返回的JSON作为参数传入回调函数中，我们通过回调函数来来操作数据
		function handleResponse(response) {
			document.getElementById("txt").innerHTML=response.count;
//			console.log(response);
		}
	</script>
	<script type="text/javascript">
		window.onload = function() {

			var oBtn = document.getElementById('btn');

			oBtn.onclick = function() {

				var script = document.createElement("script");
//				动态创建<script>标签，设置其src，回调函数在src中设置：
				script.src = "https://api.douban.com/v2/book/search?q=javascript&count=1&callback=handleResponse";
//				script.src="http://www.sojson.com/open/api/weather/json.shtml?city=%E6%B7%B1%E5%9C%B3&callback=handleResponse";
				document.body.insertBefore(script, document.body.firstChild);
			};
		};
	</script>

</html>